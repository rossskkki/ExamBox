"use strict";(self["webpackChunkfornt"]=self["webpackChunkfornt"]||[]).push([[75],{3075:function(e,l,o){o.r(l),o.d(l,{default:function(){return h}});var a=o(6768),n=o(4232);const t={class:"search-container"},s={class:"search-filters"},c={class:"question-list-content"},u={class:"question-content"},r={key:0,class:"question-options"},i={key:1,class:"question-file"};function v(e,l,o,v,d,y){const p=(0,a.g2)("van-nav-bar"),C=(0,a.g2)("van-search"),g=(0,a.g2)("van-cell"),k=(0,a.g2)("van-cell-group"),h=(0,a.g2)("van-picker"),m=(0,a.g2)("van-popup"),f=(0,a.g2)("van-empty"),w=(0,a.g2)("van-button"),b=(0,a.g2)("van-list");return(0,a.uX)(),(0,a.CE)("div",t,[(0,a.bF)(p,{title:"题目搜索","left-text":"返回","left-arrow":"",onClickLeft:v.goBack},null,8,["onClickLeft"]),(0,a.Lk)("div",s,[(0,a.bF)(C,{modelValue:v.searchKeyword,"onUpdate:modelValue":l[1]||(l[1]=e=>v.searchKeyword=e),placeholder:"请输入题目关键字","show-action":"",onSearch:v.onSearch},{action:(0,a.k6)(()=>[(0,a.Lk)("div",{onClick:l[0]||(l[0]=(...e)=>v.onSearch&&v.onSearch(...e))},"搜索")]),_:1},8,["modelValue","onSearch"]),(0,a.bF)(k,null,{default:(0,a.k6)(()=>[(0,a.bF)(g,{title:"分类",value:v.selectedCategoryName||"请选择分类","is-link":"",onClick:v.handleCategoryClick},null,8,["value","onClick"]),(0,a.bF)(g,{title:"题目类型",value:v.selectedTypeName||"请选择题目类型","is-link":"",onClick:v.handleTypeClick},null,8,["value","onClick"])]),_:1})]),(0,a.bF)(m,{show:v.showCategoryPicker,"onUpdate:show":[l[2]||(l[2]=e=>v.showCategoryPicker=e),v.onCategoryPickerUpdate],position:"bottom","close-on-click-overlay":!0},{default:(0,a.k6)(()=>[(0,a.bF)(h,{columns:v.categoryColumns,onConfirm:v.onCategoryConfirm,onCancel:v.onCategoryCancel,"show-toolbar":"",title:"选择分类"},null,8,["columns","onConfirm","onCancel"])]),_:1},8,["show","onUpdate:show"]),(0,a.bF)(m,{show:v.showTypePicker,"onUpdate:show":[l[3]||(l[3]=e=>v.showTypePicker=e),v.onTypePickerUpdate],position:"bottom","close-on-click-overlay":!0},{default:(0,a.k6)(()=>[(0,a.bF)(h,{columns:v.typeColumns,onConfirm:v.onTypeConfirm,onCancel:v.onTypeCancel,"show-toolbar":"",title:"选择题目类型"},null,8,["columns","onConfirm","onCancel"])]),_:1},8,["show","onUpdate:show"]),(0,a.Lk)("div",c,[v.searchResults.length?((0,a.uX)(),(0,a.Wv)(b,{key:1},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.searchResults,e=>((0,a.uX)(),(0,a.Wv)(k,{key:e.id},{default:(0,a.k6)(()=>[(0,a.bF)(g,{title:`ID:${e.id}`,class:"small-text"},{label:(0,a.k6)(()=>[(0,a.Lk)("div",u,(0,n.v_)(e.content),1),e.options?((0,a.uX)(),(0,a.CE)("div",r,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.options,(e,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l},(0,n.v_)(String.fromCharCode(65+l))+". "+(0,n.v_)(e),1))),128))])):(0,a.Q3)("",!0)]),_:2},1032,["title"]),(0,a.bF)(w,{type:"primary",size:"small",onClick:l=>v.toggleAnswer(e.id)},{default:(0,a.k6)(()=>l[4]||(l[4]=[(0,a.eW)("查看答案")])),_:2,__:[4]},1032,["onClick"]),v.shownAnswers[e.id]?((0,a.uX)(),(0,a.Wv)(g,{key:0,class:"answer",title:"答案",value:e.answer},null,8,["value"])):(0,a.Q3)("",!0),e.fileName?((0,a.uX)(),(0,a.CE)("div",i,"选自："+(0,n.v_)(e.fileName),1)):(0,a.Q3)("",!0)]),_:2},1024))),128))]),_:1})):((0,a.uX)(),(0,a.Wv)(f,{key:0,description:"暂无题目"}))])])}o(8111),o(1701);var d=o(144),y=o(1387),p=o(5092),C={name:"ExamSearch",setup(){const{proxy:e}=(0,a.nI)(),l=(0,y.rd)(),o=(0,d.KR)(""),n=(0,d.KR)([]),t=(0,d.KR)(!1),s=(0,d.KR)(!1),c=(0,d.KR)([]),u=(0,d.KR)(null),r=(0,d.KR)(""),i=(0,d.KR)(!1),v=(0,d.KR)([]),C=(0,d.KR)(null),g=(0,d.KR)(""),k=(0,d.KR)(!1),h=(0,d.KR)({}),m=(0,a.EW)(()=>c.value),f=(0,a.EW)(()=>v.value),w=()=>{l.go(-1)},b=()=>{i.value=!1,k.value=!1,console.log("强制关闭选择器")},_=()=>{console.log("点击分类，当前状态:",i.value),k.value=!1,i.value=!0,console.log("设置分类选择器为:",i.value)},K=()=>{console.log("点击类型，当前状态:",k.value),i.value=!1,k.value=!0,console.log("设置类型选择器为:",k.value)},R=async()=>{try{const e=await(0,p.rm)();c.value=[{text:"全部分类",value:null},...e.data.data.map(e=>({text:e.name,value:e.id}))]}catch(e){console.error("加载分类失败:",e),c.value=[{text:"全部分类",value:null}]}},F=async()=>{v.value=[{text:"全部类型",value:null},{text:"单选题",value:"CHOICE"},{text:"判断题",value:"TRUE_FALSE"},{text:"填空题",value:"FILL_IN"},{text:"简答题",value:"ESSAY"}]},T=e=>{h.value[e]=!h.value[e]},x=({selectedOptions:e})=>{console.log("分类确认:",e),e&&e.length>0&&(u.value=e[0].value,r.value=e[0].text),X(),i.value=!1,console.log("分类选择器关闭")},E=()=>{console.log("分类取消"),i.value=!1},P=({selectedOptions:e})=>{console.log("类型确认:",e),e&&e.length>0&&(C.value=e[0].value,g.value=e[0].text),X(),k.value=!1,console.log("类型选择器关闭")},S=()=>{console.log("类型取消"),k.value=!1},I=e=>{console.log("分类选择器状态更新:",e),e||(i.value=!1)},L=e=>{console.log("类型选择器状态更新:",e),e||(k.value=!1)},U=async()=>{if(o.value.trim())try{t.value=!0;const l={keyword:o.value.trim()||null,categoryId:u.value,type:C.value};console.log(l);const a=await e.$api.searchQ(l);console.log(a.data.data),n.value=a.data.data,console.log(n.value),s.value=!0}catch(l){console.error("搜索失败:",l),e.$toast.fail("搜索失败")}finally{t.value=!1}},X=()=>{n.value=[],s.value=!1,U()},A=e=>{const l=`/upload-files/${e}`;window.open(l,"_blank")};return(0,a.sV)(async()=>{await R(),await F(),i.value=!1,k.value=!1,console.log("组件挂载完成，选择器状态:",{category:i.value,type:k.value})}),{searchKeyword:o,searchResults:n,loading:t,finished:s,categoryOptions:c,selectedCategoryId:u,selectedCategoryName:r,showCategoryPicker:i,typeOptions:v,selectedType:C,selectedTypeName:g,showTypePicker:k,categoryColumns:m,typeColumns:f,shownAnswers:h,toggleAnswer:T,goBack:w,handleCategoryClick:_,handleTypeClick:K,onCategoryConfirm:x,onCategoryCancel:E,onTypeConfirm:P,onTypeCancel:S,onSearch:X,onLoad:U,openPdf:A,onCategoryPickerUpdate:I,onTypePickerUpdate:L,forceClosePickers:b}}},g=o(1241);const k=(0,g.A)(C,[["render",v],["__scopeId","data-v-aea59982"]]);var h=k}}]);
//# sourceMappingURL=75.c6305524.js.map